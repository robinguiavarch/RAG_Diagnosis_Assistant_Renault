
==================================================
 ğŸ¯ TEST RAPIDE RERANKING_07.PY ğŸ¯
==================================================

--------------------------------------------------
 TEST: EXISTENCE
--------------------------------------------------

==================================================
 EXISTENCE SCRIPT
==================================================
âœ… Script trouvÃ© (20151 bytes)
âœ… Existence: RÃ‰USSI (0.0s)

--------------------------------------------------
 TEST: DÃ‰PENDANCES
--------------------------------------------------

==================================================
 DIAGNOSTIC DÃ‰PENDANCES ET CONFIG
==================================================
ğŸ“ RÃ©pertoire courant: /Users/robinguiavarch/Documents/git_projects/diagnosis_assistant_renault/rags
ğŸ“„ Config: config/settings.yaml
ğŸ“„ Config existe: True

ğŸ¯ Configuration re-ranking:
   enabled: True
   top_k_before_rerank: 10
   final_top_k: 5
   reranker_model: cross-encoder/ms-marco-MiniLM-L-6-v2

ğŸ“Š Index requis:
   BM25: data/bm25_index â†’ True
   FAISS: data/index_faiss â†’ True

ğŸ§ª Test dÃ©pendances avec reranking_07.py:
ğŸ“¤ Code retour: 0
ğŸ“‹ Sortie:
   ğŸ”„ Test imports...
   âœ… Imports retrieval OK
   âœ… Import CrossEncoderReranker OK
   âœ… Chargement config OK
   ğŸ¤– Test modÃ¨le: cross-encoder/ms-marco-MiniLM-L-6-v2
   ğŸ¯ Device disponible: cpu
   ğŸ“Š BM25 index: True
   ğŸ“Š FAISS index: True
   ğŸ“Š BM25 valide: True
   ğŸ“Š FAISS index.faiss: True
   ğŸ“Š FAISS metadata.pkl: True

âœ… CrossEncoderReranker disponible
âœ… DÃ©pendances: RÃ‰USSI (3.2s)

--------------------------------------------------
 TEST: AIDE
--------------------------------------------------

==================================================
 COMMANDE AIDE
==================================================
ğŸ”„ Lancement aide reranking... (timeout: 15s)
âœ… TerminÃ© en 0.2s
âŒ ProblÃ¨me aide ou options manquantes
ğŸ” Sortie aide:
âŒ Aide: Ã‰CHEC (0.2s)

--------------------------------------------------
 TEST: PIPELINE COMPLET
--------------------------------------------------

==================================================
 PIPELINE COMPLET AVEC RE-RANKING
==================================================
ğŸ” Test pipeline complet depuis: /Users/robinguiavarch/Documents/git_projects/diagnosis_assistant_renault/rags
ğŸ”„ Lancement pipeline complet... (timeout: 90s)
âœ… TerminÃ© en 5.5s
ğŸ“¤ Code retour: 0

ğŸ“‹ Analyse du pipeline:
   âœ… Initialisation: dÃ©tectÃ©
      L  3: ğŸ” Initialisation des composants RAG......
   âœ… BM25: dÃ©tectÃ©
      L  4: âœ… BM25Retriever initialisÃ©...
      L 12: ğŸ“ BM25: 1510 chunks, 1 docs...
   âœ… FAISS: dÃ©tectÃ©
      L  5: âœ… FAISSRetriever initialisÃ©...
      L 13: ğŸ§  FAISS: 1510 vecteurs, dim=384...
   âœ… Fusion: dÃ©tectÃ©
      L 21: âš–ï¸ Fusion des rÃ©sultats......
      L 22: ğŸ”€ Fusion: 10 rÃ©sultats (0.00s)...
   âœ… Re-ranking: dÃ©tectÃ©
      L  6: ğŸ”„ Chargement CrossEncoder: cross-encoder/ms-marco-MiniLM-L-6-v2...
      L  7: ğŸ¯ Device cible: cpu...
   âœ… Statistiques: dÃ©tectÃ©
      L 11: ğŸ“Š STATISTIQUES:...
      L 12: ğŸ“ BM25: 1510 chunks, 1 docs...
   âŒ Erreurs: non dÃ©tectÃ©

ğŸ’¾ Fichiers crÃ©Ã©s: 1
ğŸ“Š MÃ©tadonnÃ©es JSON:
   mÃ©thode: hybrid_bm25_faiss_crossencoder
   Ã©tapes: ['bm25', 'faiss', 'fusion', 'cross_encoder_rerank']
   rÃ©sultats: 5
   re-ranking effectuÃ©: True
ğŸ“ˆ Scores du premier rÃ©sultat:
   CrossEncoder: 4.7915
   Fusion: 0.0617
   Rang original: #6
â±ï¸ Performance:
   total_time_seconds: 0.304s
   bm25_time_seconds: 0.008s
   faiss_time_seconds: 0.093s
   fusion_time_seconds: 0.000s
   rerank_time_seconds: 0.203s
âœ… Pipeline complet fonctionnel avec re-ranking
âœ… Pipeline complet: RÃ‰USSI (5.5s)

--------------------------------------------------
 TEST: BENCHMARK
--------------------------------------------------

==================================================
 MODE BENCHMARK
==================================================
ğŸ”„ Lancement benchmark reranker... (timeout: 30s)
âœ… TerminÃ© en 3.8s
   ğŸ“Š ğŸš€ Mode benchmark du CrossEncoder...
   ğŸ“Š ğŸš€ Benchmark CrossEncoder: 5 documents, 5 runs
   ğŸ“Š ğŸ“Š RÃ©sultats benchmark:
   ğŸ“Š avg_time_seconds: 0.016172266006469725
âœ… Benchmark fonctionnel
âœ… Benchmark: RÃ‰USSI (3.8s)

--------------------------------------------------
 TEST: GESTION ERREURS
--------------------------------------------------

==================================================
 GESTION ERREURS RERANKING
==================================================

ğŸ“Š Test: Config inexistante
ğŸ”„ Lancement Config inexistante... (timeout: 25s)
âœ… TerminÃ© en 2.5s
   âœ… Ã‰chec attendu correctement gÃ©rÃ©

ğŸ“Š Test: Query manquante avec input
ğŸ”„ Lancement Query manquante avec input... (timeout: 25s)
âœ… TerminÃ© en 2.5s
   âœ… Ã‰chec attendu correctement gÃ©rÃ©
âœ… Gestion erreurs: RÃ‰USSI (5.0s)

--------------------------------------------------
 TEST: PERFORMANCE
--------------------------------------------------

==================================================
 PERFORMANCE COMPARATIVE
==================================================
ğŸ“Š Test 1: Sans re-ranking (baseline)
ğŸ”„ Lancement baseline sans reranking... (timeout: 30s)
âœ… TerminÃ© en 0.2s
   Baseline: âŒ (0.2s)

ğŸ“Š Test 2: Avec re-ranking
ğŸ”„ Lancement avec reranking... (timeout: 60s)
âœ… TerminÃ© en 5.4s
   Re-ranking: âœ… (5.4s)

ğŸ“ˆ ANALYSE COMPARATIVE:
   âœ… Re-ranking fonctionne (baseline Ã©chouÃ©)
âœ… Performance: RÃ‰USSI (5.6s)

==================================================
 ğŸ“Š RAPPORT RERANKING
==================================================
â±ï¸ Temps total: 23.3s
âœ… Tests rÃ©ussis: 6/7
ğŸ“ˆ Taux de rÃ©ussite: 85.7%

ğŸ“‹ DÃ©tail par test:
   âœ… Existence: 0.0s
   âœ… DÃ©pendances: 3.2s
   âŒ Aide: 0.2s
   âœ… Pipeline complet: 5.5s
   âœ… Benchmark: 3.8s
   âœ… Gestion erreurs: 5.0s
   âœ… Performance: 5.6s

ğŸ‰ PIPELINE DE RERANKING FONCTIONNEL!
ğŸ… Le systÃ¨me CrossEncoder est opÃ©rationnel
